<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Town Sim</title>
  </head>
  <body>
    <div id="start-screen">
      <form id="start-form">
        <h1>Welcome Home</h1>
        <p>Create a new game or load your profile.</p>
        <label for="auth-mode">Mode</label>
        <select id="auth-mode" required>
          <option value="register">Create New Game</option>
          <option value="login">Load Game</option>
        </select>
        <label for="player-name">Username</label>
        <input id="player-name" type="text" maxlength="24" required placeholder="username" />
        <label for="player-password">Password</label>
        <input id="player-password" type="password" minlength="4" maxlength="72" required placeholder="password" />
        <label for="player-gender" id="player-gender-label">Gender</label>
        <select id="player-gender">
          <option value="female">Female</option>
          <option value="male">Male</option>
          <option value="non-binary">Non-binary</option>
        </select>
        <div id="start-error" aria-live="polite"></div>
        <button id="start-submit" type="submit">Create & Start</button>
      </form>
    </div>
    <div id="game-root"></div>
    <div id="sleep-skip" class="hidden" aria-live="polite">Night passes... you wake at 6:00 AM.</div>
    <aside id="hud">
      <div class="chip" id="player-profile">Player: Traveler (unspecified)</div>
      <div class="chip" id="clock">8:00 AM</div>
      <div class="chip" id="weather">clear</div>
      <div class="chip" id="economy">Market: ...</div>
      <div class="chip rumor" id="world-events">Events: none</div>
      <div class="chip rumor" id="factions">Factions: ...</div>
      <div class="chip rumor" id="mission">Mission: ...</div>
      <div class="chip rumor" id="town-mission">Town Gossip Mission: ...</div>
      <div class="chip rumor" id="story-arc">Story Arc: ...</div>
      <div id="view-controls">
        <label for="view-mode-select">View</label>
        <select id="view-mode-select">
          <option value="auto">Auto</option>
          <option value="desktop">Desktop</option>
          <option value="mobile">Mobile</option>
        </select>
        <span class="chip" id="view-mode-active">Mode: auto</span>
      </div>
      <div id="chat-controls">
        <input id="chat-input" type="text" maxlength="240" placeholder="Say something..." />
        <button id="chat-send" type="button">Send</button>
        <button id="sleep-toggle" type="button">Sleep: Off</button>
      </div>
      <div class="chip" id="chat-target">Talking to: nobody</div>
      <div id="news-popup" class="hidden" role="dialog" aria-live="polite" tabindex="0">
        <div id="news-title"></div>
        <div id="news-text"></div>
        <div id="news-hint">Click or press Enter/Space to close</div>
      </div>
      <div id="farm-panel" class="hidden">
        <div id="farm-title">Home Farm</div>
        <div class="farm-chip" id="farm-selected">Plot: none</div>
        <div class="farm-chip" id="farm-coins">Coins: 0</div>
        <div class="farm-chip" id="farm-inventory">Inventory: -</div>
        <div id="farm-controls">
          <select id="farm-crop">
            <option value="turnip">Turnip</option>
            <option value="carrot">Carrot</option>
            <option value="pumpkin">Pumpkin</option>
          </select>
          <button id="farm-sow" type="button" class="farm-tool-btn">Tool: Sow</button>
          <button id="farm-water" type="button" class="farm-tool-btn">Tool: Water</button>
          <button id="farm-harvest" type="button" class="farm-tool-btn">Tool: Harvest</button>
          <button id="farm-unselect" type="button" class="farm-tool-btn">Unselect Plot</button>
        </div>
        <div id="farm-hint">Move near your home field to reveal tools. Click a plot first.</div>
        <div id="farm-feedback">No farm updates yet.</div>
      </div>
    </aside>
    <div id="mobile-controls" aria-label="mobile controls">
      <div id="mobile-dpad">
        <button type="button" class="m-btn" id="m-up">▲</button>
        <button type="button" class="m-btn" id="m-left">◀</button>
        <button type="button" class="m-btn" id="m-down">▼</button>
        <button type="button" class="m-btn" id="m-right">▶</button>
      </div>
      <div id="mobile-actions">
        <button type="button" class="m-btn action" id="m-use">Use / Talk</button>
        <button type="button" class="m-btn action" id="m-chat">Quick Chat</button>
        <div id="mobile-chat-menu" class="hidden">
          <button type="button" class="m-chat-option" data-chat="Hello there.">Hello</button>
          <button type="button" class="m-chat-option" data-chat="Follow me.">Follow me</button>
          <button type="button" class="m-chat-option" data-chat="Can you help me?">Help</button>
        </div>
      </div>
    </div>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
