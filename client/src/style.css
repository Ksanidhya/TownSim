:root {
  --bg-top: #90c9de;
  --bg-mid: #4d7c68;
  --bg-bottom: #283633;
  --panel: rgba(14, 23, 25, 0.78);
  --panel-border: rgba(230, 242, 236, 0.2);
  --chip: rgba(20, 35, 37, 0.74);
  --chip-border: rgba(237, 249, 244, 0.18);
  --text: #edf5f1;
  --muted: #b4c7c2;
  --accent: #f1cf75;
  --accent-strong: #e3a94f;
  --danger: #ffcc9f;
  --focus: rgba(241, 207, 117, 0.4);
  --screen-glow: rgba(153, 206, 219, 0.42);
  --screen-deep: rgba(7, 14, 18, 0.94);
}

* {
  box-sizing: border-box;
}

html,
body {
  width: 100%;
  height: 100%;
}

body {
  margin: 0;
  overflow: hidden;
  color: var(--text);
  font-family: "Avenir Next", "Gill Sans", "Trebuchet MS", sans-serif;
  background:
    radial-gradient(circle at 18% 4%, var(--bg-top) 0%, rgba(140, 205, 223, 0) 42%),
    radial-gradient(circle at 80% 92%, rgba(46, 71, 80, 0.35) 0%, rgba(46, 71, 80, 0) 38%),
    linear-gradient(180deg, var(--bg-mid) 0%, var(--bg-bottom) 68%);
  transition: background 450ms ease, color 300ms ease;
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background-image:
    linear-gradient(rgba(255, 255, 255, 0.025) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255, 255, 255, 0.025) 1px, transparent 1px);
  background-size: 40px 40px;
  opacity: 0.3;
  z-index: -1;
}

body[data-time-phase="dawn"] {
  --bg-top: #f0ac85;
  --bg-mid: #6f5b63;
  --bg-bottom: #332933;
  --panel: rgba(29, 23, 25, 0.78);
  --chip: rgba(43, 30, 32, 0.74);
  --screen-glow: rgba(252, 171, 129, 0.46);
  --screen-deep: rgba(17, 10, 12, 0.95);
}

body[data-time-phase="day"] {
  --bg-top: #9ad3e5;
  --bg-mid: #4f816a;
  --bg-bottom: #283833;
  --panel: rgba(14, 23, 25, 0.78);
  --chip: rgba(20, 35, 37, 0.74);
  --screen-glow: rgba(153, 206, 219, 0.42);
  --screen-deep: rgba(7, 14, 18, 0.94);
}

body[data-time-phase="dusk"] {
  --bg-top: #b08790;
  --bg-mid: #4e4d61;
  --bg-bottom: #232a36;
  --panel: rgba(20, 19, 30, 0.8);
  --chip: rgba(30, 30, 46, 0.73);
  --screen-glow: rgba(176, 124, 146, 0.42);
  --screen-deep: rgba(10, 11, 19, 0.95);
}

body[data-time-phase="night"] {
  --bg-top: #32445e;
  --bg-mid: #1f2b3e;
  --bg-bottom: #141b28;
  --panel: rgba(10, 14, 23, 0.82);
  --chip: rgba(18, 26, 42, 0.76);
  --screen-glow: rgba(81, 106, 149, 0.42);
  --screen-deep: rgba(5, 8, 14, 0.95);
}

#game-root canvas {
  image-rendering: pixelated;
  image-rendering: crisp-edges;
}

#sleep-skip {
  position: fixed;
  inset: 0;
  z-index: 130;
  display: grid;
  place-items: center;
  padding: 24px;
  text-align: center;
  font-size: clamp(17px, 2.4vw, 30px);
  letter-spacing: 0.02em;
  color: #f7f3dd;
  background: rgba(6, 10, 18, 0.72);
  backdrop-filter: blur(4px);
  transition: opacity 240ms ease;
}

#sleep-skip.hidden {
  opacity: 0;
  pointer-events: none;
}

#start-screen {
  position: fixed;
  inset: 0;
  z-index: 150;
  display: grid;
  place-items: center;
  padding: 14px;
  background: radial-gradient(circle at 50% 18%, var(--screen-glow) 0%, var(--screen-deep) 68%);
}

#start-screen.hidden {
  display: none;
}

#start-form {
  width: min(410px, calc(100vw - 28px));
  padding: 22px;
  border-radius: 16px;
  border: 1px solid var(--panel-border);
  background:
    linear-gradient(150deg, rgba(17, 31, 35, 0.95), rgba(10, 18, 21, 0.98)),
    var(--panel);
  box-shadow:
    0 16px 34px rgba(2, 5, 8, 0.42),
    inset 0 1px 0 rgba(255, 255, 255, 0.06);
  display: grid;
  gap: 10px;
}

#start-form h1 {
  margin: 0;
  font-size: clamp(23px, 4vw, 30px);
  color: #ffe6a1;
  letter-spacing: 0.02em;
}

#start-form p {
  margin: 0 0 8px 0;
  color: var(--muted);
}

#start-form label {
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: #d5e3df;
}

#start-form input,
#start-form select,
#start-form button,
#chat-input,
#chat-send,
#sleep-toggle,
#farm-controls select,
#farm-controls button {
  font: inherit;
  border-radius: 10px;
  border: 1px solid var(--chip-border);
  color: var(--text);
  transition: background 180ms ease, border-color 180ms ease, transform 140ms ease;
}

#start-form input,
#start-form select,
#chat-input,
#farm-controls select {
  background: rgba(12, 22, 25, 0.9);
  padding: 10px 12px;
}

#start-form button,
#chat-send,
#sleep-toggle,
#farm-controls button {
  background: linear-gradient(180deg, #5f7550 0%, #45563d 100%);
  color: #f5f8ee;
  cursor: pointer;
  padding: 9px 12px;
}

#start-form button:hover,
#chat-send:hover,
#sleep-toggle:hover,
#farm-controls button:hover {
  background: linear-gradient(180deg, #70895e 0%, #516748 100%);
}

#start-form button:active,
#chat-send:active,
#sleep-toggle:active,
#farm-controls button:active {
  transform: translateY(1px);
}

input:focus-visible,
select:focus-visible,
button:focus-visible,
#news-popup:focus-visible {
  outline: 2px solid var(--focus);
  outline-offset: 1px;
}

#start-error {
  min-height: 16px;
  font-size: 12px;
  color: var(--danger);
}

#hud {
  position: fixed;
  top: 10px;
  left: 10px;
  width: min(560px, calc(100vw - 20px));
  padding: 10px;
  border-radius: 14px;
  border: 1px solid var(--panel-border);
  background: var(--panel);
  backdrop-filter: blur(8px);
  box-shadow:
    0 14px 30px rgba(4, 8, 11, 0.38),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  pointer-events: none;
}

.chip {
  display: inline-block;
  margin: 0 8px 8px 0;
  padding: 7px 11px;
  border-radius: 9px;
  background: var(--chip);
  border: 1px solid var(--chip-border);
}

.rumor {
  max-width: 100%;
}

#chat-controls,
#farm-controls {
  display: flex;
  gap: 8px;
  margin-bottom: 8px;
  pointer-events: auto;
}

#chat-input {
  flex: 1;
  min-width: 160px;
}

#farm-panel {
  margin-top: 10px;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid var(--panel-border);
  background: rgba(8, 16, 20, 0.66);
  pointer-events: auto;
}

#farm-title,
#news-title {
  font-weight: 700;
  color: var(--accent);
  margin-bottom: 7px;
}

.farm-chip,
#farm-hint,
#farm-feedback,
#news-text,
#news-hint {
  font-size: 12px;
  line-height: 1.4;
}

#farm-hint {
  color: var(--muted);
  margin-top: 8px;
}

#farm-feedback {
  margin-top: 7px;
  color: #f6e6a5;
  min-height: 16px;
}

#news-popup {
  margin-top: 10px;
  padding: 11px 12px;
  border-radius: 10px;
  border: 1px solid var(--panel-border);
  background: rgba(8, 13, 17, 0.94);
  pointer-events: auto;
  cursor: pointer;
  white-space: pre-line;
}

#news-popup.hidden {
  display: none;
}

#news-hint {
  margin-top: 8px;
  color: var(--muted);
}

@media (max-width: 768px) {
  #hud {
    width: calc(100vw - 16px);
    left: 8px;
    top: 8px;
    padding: 8px;
  }

  #chat-controls,
  #farm-controls {
    flex-wrap: wrap;
  }

  #chat-input {
    min-width: 100%;
  }
}
